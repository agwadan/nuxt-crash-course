<!DOCTYPE html>
<html lang="en">

<head>
  <title>Vue Components</title>

  <style>
    input {
      margin: 20px;
      display: block;
    }
  </style>
</head>

<body>
  <div class="app" v-cloak>
    <login-form />
  </div>
</body>

<script src="https://unpkg.com/vue@next"></script>
<script>

  let app = Vue.createApp({
    data: function () {
      return {
        greeting: 'Hello Vue 3!',
        visible: false,
      }
    },

    methods: {
      toggleBox() {
        this.visible = !this.visible
      },

      greet() {
        console.log(this.greeting);
      }
    }
  })

  /* All components should be between the app definition and mounting the app */

  app.component('login-form', {
    template: `
      <form @submit.prevent="handleSubmit">
       <h1> {{title}} </h1>  
        <custom-input v-model="email" v-bind:label="emailLabel"/>  
        <custom-input v-model="password"  v-bind:label="passwordLabel"/>  
        <button>Log In</button>
      </form>
    `,

    components: ['custom-input']
    ,
    data() {
      return {
        title: 'Login Form',
        email: '',
        password: '',
        emailLabel: 'Email',
        passwordLabel: 'Password'
      }
    },

    methods: {
      handleSubmit() {
        console.log(this.email + this.password);
      }
    }
  })

  app.component('custom-input', {
    template: `
    <label>
      {{label}}
      </label>
    <input type="text" v-model="inputValue"/>
  `,

    props: ['label', 'modelValue'],

    computed: {
      inputValue: {

        get() {
          return this.modelValue
        },
        set(value) {
          console.log(value);
          this.$emit('update:modelValue', value) //----- (type of event being emitted, value passed through that event)
        }
      }
    }


    /*  data() {
       return
       {
         inputValue: ''
       }
     }
     */
  })
  app.mount('.app')
</script>

</html>